<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Configuration Test - SVIT UA</title>
    
    <!-- Common styles -->
    <link rel="stylesheet" href="assets/css/header.css">    
    <link rel="stylesheet" href="assets/css/mobile_menu.css">    
    <link rel="stylesheet" href="assets/css/enhanced_menu.css">    
    <!-- Page-specific styles -->
    <link rel="stylesheet" href="assets/css/index_m.css">
    
    <script src="assets/js/index.js"></script>
    <script src="assets/js/menu.js"></script>
</head>
<body class="compact-menu">
    <!-- Header begin "uuid_id":"tmpl_a456-426614174002" -->
    <header>
        <nav class="container">
            <div class="logo">
                <img src="uploads1/2025/03/svitua_100x100.png" alt="SVIT UA Logo">
                <h1>SVIT UA</h1>
            </div>
            
            <ul class="nav-links">
                <!-- Menu will be dynamically generated by menu.js -->
            </ul>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Menu">
                ☰
            </button>
            
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="language-switch">
                    <a href="#" class="lang-btn active" title="Українська">🇺🇦</a>
                    <a href="#" class="lang-btn" title="Svenska">🇸🇪</a>
                    <a href="#" class="lang-btn" title="English">🇬🇧</a>
                </div>
            </div>
        </nav>

        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" onclick="closeMobileMenu()"></div>
        
        <!-- Enhanced Mobile Menu - Compact Version -->
        <nav class="mobile-menu">
            <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="Close Menu">
                ✕
            </button>
            
            <ul class="mobile-nav-links">
                <!-- Mobile menu will be dynamically generated by menu.js -->
            </ul>

            <div class="mobile-language-section">
                <h4>Мова / Language</h4>
                <div class="mobile-language-switch">
                    <a href="#" class="lang-btn active" title="Українська">🇺🇦</a>
                    <a href="#" class="lang-btn" title="Svenska">🇸🇪</a>
                    <a href="#" class="lang-btn" title="English">🇬🇧</a>
                </div>
            </div>
        </nav>
    </header>
    <!-- Header end "uuid_id":"tmpl_a456-426614174002" -->

    <!-- Test Content -->
    <section style="padding: 50px 20px; max-width: 1200px; margin: 0 auto;">
        <h1>Menu Configuration Test</h1>
        <p>This page demonstrates the menu configuration system. Notice that:</p>
        <ul>
            <li><strong>FAQ</strong> is disabled and should not appear in the menu</li>
            <li><strong>Донатори</strong> and <strong>Волонтери</strong> under <strong>Партнери</strong> are disabled</li>
            <li>Only <strong>Організації</strong> should appear under <strong>Партнери</strong></li>
        </ul>

        <h2>Test Controls</h2>
        <p>Open browser console and run these commands to test:</p>
        <pre>
// Show FAQ
toggleCompactMenuItem("FAQ", true);

// Hide FAQ
toggleCompactMenuItem("FAQ", false);

// Show Donors
toggleCompactSubMenuItem("Партнери", "Донатори", true);

// Hide Donors
toggleCompactSubMenuItem("Партнери", "Донатори", false);

// Refresh menu to see changes
refreshMenu();
        </pre>

        <h2>Current Menu Configuration</h2>
        <div id="menu-config-display" style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Compact Menu Items:</h3>
            <ul id="menu-items-list">
                <!-- Will be populated by JavaScript -->
            </ul>
        </div>
    </section>

    <!-- Enhanced JavaScript for Mobile Menu -->
    <script>
        // Mobile Menu Functions
        function toggleMobileMenu() {
            const mobileMenu = document.querySelector('.mobile-menu');
            const overlay = document.querySelector('.mobile-menu-overlay');
            
            mobileMenu.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            const mobileMenu = document.querySelector('.mobile-menu');
            const overlay = document.querySelector('.mobile-menu-overlay');
            
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            
            const dropdowns = document.querySelectorAll('.mobile-dropdown.active');
            dropdowns.forEach(dropdown => {
                dropdown.classList.remove('active');
                dropdown.parentElement.classList.remove('active');
            });
        }

        function toggleMobileDropdown(element) {
            const dropdown = element.nextElementSibling;
            const parent = element.parentElement;
            
            const allDropdowns = document.querySelectorAll('.mobile-dropdown.active');
            allDropdowns.forEach(dd => {
                if (dd !== dropdown) {
                    dd.classList.remove('active');
                    dd.parentElement.classList.remove('active');
                }
            });
            
            dropdown.classList.toggle('active');
            parent.classList.toggle('active');
        }

        // Close mobile menu on window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMobileMenu();
            }
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.mobile-menu') && !event.target.closest('.mobile-menu-toggle')) {
                closeMobileMenu();
            }
        });

        // Display current menu configuration
        function displayMenuConfiguration() {
            const menuList = document.getElementById('menu-items-list');
            if (!menuList) return;

            let html = '';
            Object.entries(compactMenuConfig.menu_structure).forEach(([key, item]) => {
                const status = item.enabled ? '✅ Enabled' : '❌ Disabled';
                html += `<li><strong>${key}</strong>: ${status}`;
                
                if (item.submenu) {
                    html += '<ul>';
                    Object.entries(item.submenu).forEach(([subKey, subItem]) => {
                        const subStatus = subItem.enabled ? '✅ Enabled' : '❌ Disabled';
                        html += `<li>${subKey}: ${subStatus}</li>`;
                    });
                    html += '</ul>';
                }
                html += '</li>';
            });
            
            menuList.innerHTML = html;
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize existing functions from index.js
            if (typeof initPartnersCarousel === 'function') {
                initPartnersCarousel();
            }
            
            // Apply configuration changes and refresh menu
            if (typeof applyMenuConfiguration === 'function') {
                applyMenuConfiguration();
            }
            
            // Display current configuration
            displayMenuConfiguration();
        });
    </script>

</body>
</html>
